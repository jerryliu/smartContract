{"ast":null,"code":"import _regeneratorRuntime from \"/Users/admin/Documents/Works/rentaldevice/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/admin/Documents/Works/rentaldevice/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/admin/Documents/Works/rentaldevice/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/admin/Documents/Works/rentaldevice/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/admin/Documents/Works/rentaldevice/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/admin/Documents/Works/rentaldevice/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/admin/Documents/Works/rentaldevice/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/admin/Documents/Works/rentaldevice/client/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Button, Col, Modal, Layout, message, Tooltip, Breadcrumb, Row, Table, Spin, notification } from 'antd'; // import {  } from 'antd/lib/radio';\n// import moment from 'moment';\n\nimport Web3 from \"web3\";\nimport RentalContract from \"./contracts/RentalContract.json\";\nimport PlaylistContract from \"./contracts/PlaylistContract.json\";\nimport _ from 'lodash'; // const web3 = new Web3('http://localhost:8545', options);\n\nvar moment = require('moment-timezone');\n\nvar Header = Layout.Header,\n    Content = Layout.Content,\n    Footer = Layout.Footer;\nvar mediaScheduleUrl = \"http://localhost:3005/api/mediaSchedule\";\nvar transactionLogApiUrl = \"http://localhost:3005/api/transactionLogs\";\nvar web3 = new Web3('ws://10.0.0.52:8546');\nweb3.transactionConfirmationBlocks = 2;\nvar address = \"0xCEf98AB22b9d547B7dFD63cBcEFF32f2534b49c6\";\n/**\n * \n * account[1] 是seller account\n * account[2] 是buyer account\n * account[3] 是system account\n * account[4] 是player account\n * account[5] 是temp account \n * */\n\nconsole.log('TIME ZONE', moment().tz(\"Asia/Taipei\").format('YYYY-MM-DD HH:mm:ss'));\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props, context) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props)); // console.log('constructor context/ PLAYER',context);\n    // const userData = JSON.parse(sessionStorage.getItem('userData'));\n\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var accounts, networkId, balance, rentalContract, scheduleRes, schedules;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return web3.eth.getAccounts();\n\n            case 3:\n              accounts = _context2.sent;\n              accounts[4] = address;\n              console.log('accounts', accounts);\n              _context2.next = 8;\n              return web3.eth.net.getId();\n\n            case 8:\n              networkId = _context2.sent;\n              _context2.next = 11;\n              return web3.eth.getBalance(accounts[4]);\n\n            case 11:\n              balance = _context2.sent;\n              balance = web3.utils.fromWei(balance, 'ether');\n              rentalContract = new web3.eth.Contract(RentalContract.abi, RentalContract.networks[networkId].address, {\n                from: accounts[0],\n                // default from address\n                gasPrice: '200000000000000',\n                // default gas price in wei, 20 gwei in this case\n                gasLimit: \"900000000\"\n              });\n              rentalContract.transactionConfirmationBlocks = 2;\n              rentalContract.methods.AddPlaylist(PlaylistContract.networks[networkId].address).send({\n                from: accounts[0],\n                gas: 200000\n              }); // this.setState({});\n\n              _context2.next = 18;\n              return fetch(\"\".concat(mediaScheduleUrl, \"/\"));\n\n            case 18:\n              scheduleRes = _context2.sent;\n              _context2.next = 21;\n              return scheduleRes.json();\n\n            case 21:\n              schedules = _context2.sent;\n\n              if (!(schedules.status === \"Fail\")) {\n                _context2.next = 24;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", message.error(schedules.status_msg));\n\n            case 24:\n              // const schedule_list= schedules.schedule_list;\n              _.forEach(schedules.schedule_list,\n              /*#__PURE__*/\n              function () {\n                var _ref2 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee(schedule) {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          schedule.contract_status = \"0\";\n                          _context.next = 3;\n                          return rentalContract.methods.getRentalStatus(schedule.contract_index).call();\n\n                        case 3:\n                          schedule.contract_status = _context.sent;\n\n                        case 4:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n\n              console.log('contract_status', schedules.schedule_list[0].contract_status); // const playlistRes = await fetch(`${playlistApiUrl}/byDevice/c3fcc585-abb0-4196-97b0-f2000dc7319d`);\n              // const playlist = await playlistRes.json();\n              // if(playlist.status===\"Fail\") return message.error(playlist.status_msg);\n              // _.map(schedules.schedule_list, (data)=>{\n              //     data.medialist=playlist.medialist\n              // })\n\n              console.log('schedules', schedules);\n\n              _this.setState({\n                networkId: networkId,\n                rentalContract: rentalContract,\n                accounts: accounts,\n                balance: balance,\n                schedule_list: schedules.schedule_list\n              }); // this.setState({ schedule_list:schedules});\n\n\n              _context2.next = 34;\n              break;\n\n            case 30:\n              _context2.prev = 30;\n              _context2.t0 = _context2[\"catch\"](0);\n              // Catch any errors for any of the above operations.\n              alert(\"Failed to load web3, accounts, or contract. Check console for details.\");\n              console.error(_context2.t0);\n\n            case 34:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 30]]);\n    }));\n\n    _this.onPlayClick =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(schedule) {\n        var _this$state, accounts, networkId, rentalContract, url, logData;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(schedule.contract_status != 0)) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", false);\n\n              case 2:\n                _this.setState({\n                  showPlayModal: true,\n                  currentSchedule: schedule\n                });\n\n                console.log('schedule', schedule);\n                _this$state = _this.state, accounts = _this$state.accounts, networkId = _this$state.networkId, rentalContract = _this$state.rentalContract;\n                console.log('onAddPlayerClick');\n                web3.eth.sendTransaction({\n                  from: accounts[5],\n                  to: accounts[3],\n                  value: '10000000000000000000'\n                }).once('transactionHash', function (hash) {\n                  notification.open({\n                    message: React.createElement(\"a\", {\n                      rel: \"noopener noreferrer\",\n                      target: \"_blank\",\n                      href: \"http://10.0.0.53:8000/#/tx/\".concat(hash),\n                      __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 122\n                      },\n                      __self: this\n                    }, \"PENDING\"),\n                    description: \"Detials From:\".concat(hash.substring(0, 7), \".... to ....\").concat(hash.substr(hash.length - 7)),\n                    duration: 0,\n                    icon: React.createElement(Spin, {\n                      __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 122\n                      },\n                      __self: this\n                    })\n                  });\n                }).once('receipt',\n                /*#__PURE__*/\n                function () {\n                  var _ref4 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee3(receipt) {\n                    var balance;\n                    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            _context3.next = 2;\n                            return web3.eth.getBalance(accounts[4]);\n\n                          case 2:\n                            balance = _context3.sent;\n                            balance = web3.utils.fromWei(balance, 'ether');\n\n                            _this.setState({\n                              balance: balance\n                            });\n\n                            notification.destroy();\n\n                          case 6:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _callee3);\n                  }));\n\n                  return function (_x3) {\n                    return _ref4.apply(this, arguments);\n                  };\n                }()).on('confirmation', function (confirmationNumber, receipt) {\n                  console.log('confirmation receipt', confirmationNumber, receipt);\n                });\n                /**\n                 * 記錄到 log database\n                 */\n\n                url = \"\".concat(transactionLogApiUrl, \"/\");\n                logData = {\n                  \"from_account_address\": accounts[5],\n                  \"from_account_name\": \"contract account\",\n                  \"to_account_address\": accounts[3],\n                  \"to_account_name\": \"system account\",\n                  \"contract_name\": \"Rental\",\n                  \"contract_address\": RentalContract.networks[networkId].address,\n                  \"contract_parent_address\": RentalContract.networks[networkId].address,\n                  \"media_schedule_name\": schedule.media_schedule_name,\n                  \"action_name\": \"Succeeded\",\n                  \"contract_exec_result\": \"Succeeded\",\n                  \"transfer_coins\": 10,\n                  \"update_time\": moment().tz(\"Asia/Taipei\").format('YYYY-MM-DD HH:mm:ss')\n                };\n                _context4.next = 11;\n                return fetch(url, {\n                  body: JSON.stringify(logData),\n                  method: \"POST\"\n                });\n\n              case 11:\n                rentalContract.methods.updateRental(schedule.contract_index, 1).send({\n                  from: accounts[2],\n                  gas: 2000000\n                });\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.onSucceededClick =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee7() {\n      var _this$state2, accounts, networkId, currentSchedule;\n\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              console.log('onSucceededClick');\n\n              _this.setState({\n                showPlayModal: false\n              }); // await web3.eth.personal.unlockAccount(\"0xE733e57d488Bc4cb7FA2a51e3EA38f955104DD40\", \"pass1234\",1000)\n\n\n              _this$state2 = _this.state, accounts = _this$state2.accounts, networkId = _this$state2.networkId, currentSchedule = _this$state2.currentSchedule;\n              console.log('schedule', currentSchedule);\n              web3.eth.sendTransaction({\n                from: accounts[5],\n                to: accounts[4],\n                value: '85000000000000000000'\n              }).once('transactionHash', function (hash) {\n                notification.open({\n                  message: React.createElement(\"a\", {\n                    rel: \"noopener noreferrer\",\n                    target: \"_blank\",\n                    href: \"http://10.0.0.53:8000/#/tx/\".concat(hash),\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 173\n                    },\n                    __self: this\n                  }, \"PENDING\"),\n                  description: \"Detials From:\".concat(hash.substring(0, 7), \".... to ....\").concat(hash.substr(hash.length - 7)),\n                  duration: 0,\n                  icon: React.createElement(Spin, {\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 173\n                    },\n                    __self: this\n                  })\n                });\n              }).once('receipt',\n              /*#__PURE__*/\n              function () {\n                var _ref6 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee5(receipt) {\n                  var balance, url, logData;\n                  return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                    while (1) {\n                      switch (_context5.prev = _context5.next) {\n                        case 0:\n                          _context5.next = 2;\n                          return web3.eth.getBalance(accounts[4]);\n\n                        case 2:\n                          balance = _context5.sent;\n                          balance = web3.utils.fromWei(balance, 'ether');\n\n                          _this.setState({\n                            balance: balance\n                          });\n\n                          notification.destroy();\n                          /**\n                           * 記錄到 log database\n                           */\n\n                          url = \"\".concat(transactionLogApiUrl, \"/\");\n                          logData = {\n                            \"from_account_address\": accounts[5],\n                            \"from_account_name\": \"contract account\",\n                            \"to_account_address\": accounts[4],\n                            \"to_account_name\": \"player account\",\n                            \"contract_name\": \"Rental\",\n                            \"contract_address\": RentalContract.networks[networkId].address,\n                            \"contract_parent_address\": RentalContract.networks[networkId].address,\n                            \"media_schedule_name\": currentSchedule.media_schedule_name,\n                            \"action_name\": \"Succeeded\",\n                            \"contract_exec_result\": \"Succeeded\",\n                            \"transfer_coins\": 85,\n                            \"update_time\": moment().tz(\"Asia/Taipei\").format('YYYY-MM-DD HH:mm:ss')\n                          };\n                          _context5.next = 10;\n                          return fetch(url, {\n                            body: JSON.stringify(logData),\n                            method: \"POST\"\n                          });\n\n                        case 10:\n                        case \"end\":\n                          return _context5.stop();\n                      }\n                    }\n                  }, _callee5);\n                }));\n\n                return function (_x4) {\n                  return _ref6.apply(this, arguments);\n                };\n              }()).on('confirmation', function (confirmationNumber, receipt) {\n                console.log('confirmation receipt', confirmationNumber, receipt);\n              });\n              web3.eth.sendTransaction({\n                from: accounts[5],\n                to: accounts[3],\n                value: '5000000000000000000'\n              }).once('transactionHash', function (hash) {\n                notification.open({\n                  message: React.createElement(\"a\", {\n                    rel: \"noopener noreferrer\",\n                    target: \"_blank\",\n                    href: \"http://10.0.0.53:8000/#/tx/\".concat(hash),\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 206\n                    },\n                    __self: this\n                  }, \"PENDING\"),\n                  description: \"Detials From:\".concat(hash.substring(0, 7), \".... to ....\").concat(hash.substr(hash.length - 7)),\n                  duration: 0,\n                  icon: React.createElement(Spin, {\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 206\n                    },\n                    __self: this\n                  })\n                });\n              }).once('receipt',\n              /*#__PURE__*/\n              function () {\n                var _ref7 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee6(receipt) {\n                  var balance, url, logData;\n                  return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n                    while (1) {\n                      switch (_context6.prev = _context6.next) {\n                        case 0:\n                          _context6.next = 2;\n                          return web3.eth.getBalance(accounts[4]);\n\n                        case 2:\n                          balance = _context6.sent;\n                          balance = web3.utils.fromWei(balance, 'ether');\n\n                          _this.setState({\n                            balance: balance\n                          });\n\n                          notification.destroy();\n                          /**\n                           * 記錄到 log database\n                           */\n\n                          url = \"\".concat(transactionLogApiUrl, \"/\");\n                          logData = {\n                            \"from_account_address\": accounts[5],\n                            \"from_account_name\": \"contract account\",\n                            \"to_account_address\": accounts[3],\n                            \"to_account_name\": \"system account\",\n                            \"contract_name\": \"Rental\",\n                            \"contract_address\": RentalContract.networks[networkId].address,\n                            \"contract_parent_address\": RentalContract.networks[networkId].address,\n                            \"media_schedule_name\": currentSchedule.media_schedule_name,\n                            \"action_name\": \"Succeeded\",\n                            \"contract_exec_result\": \"Succeeded\",\n                            \"transfer_coins\": 5,\n                            \"update_time\": moment().tz(\"Asia/Taipei\").format('YYYY-MM-DD HH:mm:ss')\n                          };\n                          _context6.next = 10;\n                          return fetch(url, {\n                            body: JSON.stringify(logData),\n                            method: \"POST\"\n                          });\n\n                        case 10:\n                        case \"end\":\n                          return _context6.stop();\n                      }\n                    }\n                  }, _callee6);\n                }));\n\n                return function (_x5) {\n                  return _ref7.apply(this, arguments);\n                };\n              }()).on('confirmation', function (confirmationNumber, receipt) {\n                console.log('confirmation receipt', confirmationNumber, receipt);\n              });\n\n            case 6:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    _this.onCancelBtnClick = function () {\n      console.log('onCancelBtnClick');\n\n      _this.setState({\n        showPlayModal: false\n      });\n    };\n\n    _this.onFailedClick =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee9() {\n      var _this$state3, accounts, networkId, currentSchedule;\n\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              // await web3.eth.personal.unlockAccount(\"0xE733e57d488Bc4cb7FA2a51e3EA38f955104DD40\", \"pass1234\",1000)\n              console.log('onFailedClick'); // await web3.eth.personal.unlockAccount(\"0xE733e57d488Bc4cb7FA2a51e3EA38f955104DD40\", \"pass1234\",1000)\n\n              _this$state3 = _this.state, accounts = _this$state3.accounts, networkId = _this$state3.networkId, currentSchedule = _this$state3.currentSchedule;\n              console.log('schedule', currentSchedule);\n              web3.eth.sendTransaction({\n                from: accounts[5],\n                to: accounts[2],\n                value: '90000000000000000000'\n              }).once('transactionHash', function (hash) {\n                notification.open({\n                  message: React.createElement(\"a\", {\n                    rel: \"noopener noreferrer\",\n                    target: \"_blank\",\n                    href: \"http://10.0.0.53:8000/#/tx/\".concat(hash),\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 262\n                    },\n                    __self: this\n                  }, \"PENDING\"),\n                  description: \"Detials From:\".concat(hash.substring(0, 7), \".... to ....\").concat(hash.substr(hash.length - 7)),\n                  duration: 0,\n                  icon: React.createElement(Spin, {\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 262\n                    },\n                    __self: this\n                  })\n                });\n              }).once('receipt',\n              /*#__PURE__*/\n              function () {\n                var _ref9 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee8(receipt) {\n                  var url, logData;\n                  return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n                    while (1) {\n                      switch (_context8.prev = _context8.next) {\n                        case 0:\n                          // let balance =await web3.eth.getBalance(accounts[4])\n                          // balance = web3.utils.fromWei(balance, 'ether')\n                          // this.setState({balance:balance});\n                          notification.destroy();\n                          /**\n                           * 記錄到 log database\n                           */\n\n                          url = \"\".concat(transactionLogApiUrl, \"/\");\n                          logData = {\n                            \"from_account_address\": accounts[5],\n                            \"from_account_name\": \"contract account\",\n                            \"to_account_address\": accounts[2],\n                            \"to_account_name\": \"buyer account\",\n                            \"contract_name\": \"Rental\",\n                            \"contract_address\": RentalContract.networks[networkId].address,\n                            \"contract_parent_address\": RentalContract.networks[networkId].address,\n                            \"media_schedule_name\": currentSchedule.media_schedule_name,\n                            \"action_name\": \"Failed\",\n                            \"contract_exec_result\": \"Succeeded\",\n                            \"transfer_coins\": 90,\n                            \"update_time\": moment().tz(\"Asia/Taipei\").format('YYYY-MM-DD HH:mm:ss')\n                          };\n                          _context8.next = 5;\n                          return fetch(url, {\n                            body: JSON.stringify(logData),\n                            method: \"POST\"\n                          });\n\n                        case 5:\n                        case \"end\":\n                          return _context8.stop();\n                      }\n                    }\n                  }, _callee8);\n                }));\n\n                return function (_x6) {\n                  return _ref9.apply(this, arguments);\n                };\n              }());\n\n              _this.setState({\n                showPlayModal: false\n              });\n\n            case 5:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n    _this.state = {\n      schedule_list: [],\n      playlist: {},\n      currentSchedule: {} // rentalInfo:{Camera_id:\"\", Now:{},Total:{},cost:680}\n\n    };\n    return _this;\n  }\n  /**\n   * 準備資料如下\n   * 1- schedule\n   * 2- rentalContract\n   */\n\n\n  _createClass(App, [{\n    key: \"showDeleteConfirm\",\n    //Delete \n    value: function showDeleteConfirm(value) {\n      var _this2 = this;\n\n      Modal.confirm({\n        title: \"Are you sure you want to delete this schedule?\",\n        okText: \"OK\",\n        cancelText: \"Cancel\",\n        onOk: function onOk(e) {\n          return _this2.yes(value);\n        }\n      });\n    }\n  }, {\n    key: \"yes\",\n    value: function yes(value) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        setTimeout(Math.random() > 0.3 ? resolve : reject, 10);\n        var url = \"\".concat(mediaScheduleUrl, \"/\") + value;\n        fetch(url, {\n          method: 'DELETE'\n        }).then(function (res) {\n          return res.json();\n        }).then(function () {\n          fetch(\"\".concat(mediaScheduleUrl, \"/\")).then(function (res) {\n            return res.json();\n          }).then(function (results) {\n            console.log(results);\n\n            _this3.setState({\n              schedule_list: results.schedule_list\n            });\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      // const {contract} =this.state;\n      var columns = [{\n        title: 'Playlist Name',\n        dataIndex: 'media_schedule_name',\n        key: 'media_schedule_name'\n      }, {\n        title: 'Start Time - End Time',\n        dataIndex: 'schedule_settings',\n        key: 'schedule_settings',\n        render: function render(text, record) {\n          return \"\".concat(text.duration_settings.start_date, \" ~ \").concat(text.duration_settings.end_date);\n        }\n      }, {\n        title: 'Rental fee',\n        dataIndex: 'rental_fee',\n        key: 'rental_fee',\n        render: function render(text, record) {\n          return 100;\n        }\n      }, {\n        title: 'Rental Status',\n        dataIndex: 'contract_status',\n        key: 'contract_status',\n        render: function render(text, record) {\n          return console.log(record.contract_status, \"record.text\") // <p>{text}</p>\n          ;\n        }\n      }, {\n        title: 'Created Time',\n        dataIndex: 'created_time',\n        key: 'created_time',\n        render: function render(text, record) {\n          return moment(text).format(\"YYYY-MM-DD\");\n        }\n      }, {\n        title: 'Action',\n        dataIndex: 'action',\n        render: function render(text, record) {\n          return React.createElement(React.Fragment, null, React.createElement(Tooltip, {\n            title: \"Play\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 367\n            },\n            __self: this\n          }, React.createElement(Button, {\n            shape: \"circle\",\n            disabled: record.status === 1 ? true : false,\n            onClick: function onClick() {\n              return _this4.onPlayClick(record);\n            },\n            icon: \"caret-right\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 368\n            },\n            __self: this\n          })), React.createElement(Tooltip, {\n            title: \"Delete\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 370\n            },\n            __self: this\n          }, React.createElement(Button, {\n            shape: \"circle\",\n            onClick: function onClick() {\n              return _this4.showDeleteConfirm(record.media_schedule_id);\n            },\n            icon: \"delete\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 371\n            },\n            __self: this\n          })));\n        }\n      }];\n      return React.createElement(Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, React.createElement(Header, {\n        style: {\n          position: 'fixed',\n          zIndex: 1,\n          width: '100%',\n          height: '34px',\n          lineHeight: \"32px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }), React.createElement(Content, {\n        style: {\n          padding: '0 50px',\n          marginTop: 34\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      }, React.createElement(Breadcrumb, {\n        style: {\n          margin: '16px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, React.createElement(Breadcrumb.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393\n        },\n        __self: this\n      }), React.createElement(Breadcrumb.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394\n        },\n        __self: this\n      }, \"Device Name\")), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 16,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      }), React.createElement(Col, {\n        span: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          margin: \"8px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          padding: \"12px\",\n          color: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }, \"Coin: \", this.state.balance, \" \")))), React.createElement(Row, {\n        style: {\n          background: '#fff',\n          padding: 24,\n          minHeight: 380\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405\n        },\n        __self: this\n      }, \"Content\", React.createElement(Table, {\n        rowKey: function rowKey(data) {\n          return data.media_schedule_id;\n        },\n        dataSource: this.state.schedule_list,\n        columns: columns,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406\n        },\n        __self: this\n      }))), React.createElement(Modal, {\n        okText: \"OK\",\n        cancelText: \"Cancel\",\n        title: \"Play Result\",\n        width: 640,\n        visible: this.state.showPlayModal,\n        onOk: function onOk(evt) {\n          return _this4.onSucceededClick();\n        },\n        onCancel: this.onCancelBtnClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: function onClick() {\n          return _this4.onSucceededClick();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }, \" Succeeded\"), React.createElement(Button, {\n        onClick: function onClick() {\n          return _this4.onFailedClick();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421\n        },\n        __self: this\n      }, \" Failed\")), React.createElement(Footer, {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425\n        },\n        __self: this\n      }, \"Rental System Device \\xA92019\"));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App; // <Card\n//     hoverable\n//     style={{ width: 240 }}\n//     cover={<img alt=\"example\" src=\"https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png\" />}\n//   >\n//     <Card.Meta\n//       description=\"www.instagram.com\"\n//     />\n//   </Card>\n//   <Card\n//     hoverable\n//     style={{ width: 240 }}\n//     cover={<img alt=\"example\" src=\"https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png\" />}\n//   >\n//     <Card.Meta\n//       description=\"www.instagram.com\"\n//     />\n//   </Card>\n//   <Card\n//     hoverable\n//     style={{ width: 240 }}\n//     cover={<img alt=\"example\" src=\"https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png\" />}\n//   >\n//     <Card.Meta\n//       description=\"www.instagram.com\"\n//     />\n// </Card>","map":{"version":3,"sources":["/Users/admin/Documents/Works/rentaldevice/client/src/App.js"],"names":["React","Component","Button","Col","Modal","Layout","message","Tooltip","Breadcrumb","Row","Table","Spin","notification","Web3","RentalContract","PlaylistContract","_","moment","require","Header","Content","Footer","mediaScheduleUrl","transactionLogApiUrl","web3","transactionConfirmationBlocks","address","console","log","tz","format","App","props","context","componentDidMount","eth","getAccounts","accounts","net","getId","networkId","getBalance","balance","utils","fromWei","rentalContract","Contract","abi","networks","from","gasPrice","gasLimit","methods","AddPlaylist","send","gas","fetch","scheduleRes","json","schedules","status","error","status_msg","forEach","schedule_list","schedule","contract_status","getRentalStatus","contract_index","call","setState","alert","onPlayClick","showPlayModal","currentSchedule","state","sendTransaction","to","value","once","hash","open","description","substring","substr","length","duration","icon","receipt","destroy","on","confirmationNumber","url","logData","media_schedule_name","body","JSON","stringify","method","updateRental","onSucceededClick","onCancelBtnClick","onFailedClick","playlist","confirm","title","okText","cancelText","onOk","e","yes","Promise","resolve","reject","setTimeout","Math","random","then","res","results","columns","dataIndex","key","render","text","record","duration_settings","start_date","end_date","showDeleteConfirm","media_schedule_id","position","zIndex","width","height","lineHeight","padding","marginTop","margin","color","background","minHeight","data","evt","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport {Button,Col,  Modal, Layout, message, Tooltip, Breadcrumb, Row,   Table, Spin, notification  } from 'antd';\n// import {  } from 'antd/lib/radio';\n// import moment from 'moment';\nimport Web3 from \"web3\";\n\nimport RentalContract from \"./contracts/RentalContract.json\";\nimport PlaylistContract from \"./contracts/PlaylistContract.json\";\nimport _ from 'lodash';\n// const web3 = new Web3('http://localhost:8545', options);\nvar moment = require('moment-timezone');\n\nconst { Header, Content, Footer } = Layout;\nconst mediaScheduleUrl=\"http://localhost:3005/api/mediaSchedule\";\nconst transactionLogApiUrl=\"http://localhost:3005/api/transactionLogs\";\nconst web3 = new Web3('ws://10.0.0.52:8546')\nweb3.transactionConfirmationBlocks = 2;\n\nconst address =\"0xCEf98AB22b9d547B7dFD63cBcEFF32f2534b49c6\";\n\n/**\n * \n * account[1] 是seller account\n * account[2] 是buyer account\n * account[3] 是system account\n * account[4] 是player account\n * account[5] 是temp account \n * */ \nconsole.log('TIME ZONE',moment().tz(\"Asia/Taipei\").format('YYYY-MM-DD HH:mm:ss'));\nclass App extends Component {\n  constructor(props, context) {\n\t\tsuper(props);\n\t\t// console.log('constructor context/ PLAYER',context);\n\t\t// const userData = JSON.parse(sessionStorage.getItem('userData'));\n        \n\t\tthis.state = {\n\t\t\tschedule_list:[],\n            playlist:{},\n            currentSchedule:{}\n\t\t\t// rentalInfo:{Camera_id:\"\", Now:{},Total:{},cost:680}\n\t\t}\n    }\n    /**\n     * 準備資料如下\n     * 1- schedule\n     * 2- rentalContract\n     */\n\tcomponentDidMount = async () => {\n\n\t\ttry {\n            /**\n             * subscribe contract event\n             */\n            const accounts = await web3.eth.getAccounts();\n            accounts[4]=address;\n            console.log('accounts',accounts);\n            const networkId = await web3.eth.net.getId();\n            \n            \n            let balance =await web3.eth.getBalance(accounts[4])\n            balance = web3.utils.fromWei(balance, 'ether')\n\n            const rentalContract = new web3.eth.Contract(\n\t\t\t\tRentalContract.abi,\n                RentalContract.networks[networkId].address,\n                {\n\t\t\t\t\tfrom: accounts[0], // default from address\n                    gasPrice: '200000000000000', // default gas price in wei, 20 gwei in this case\n                    gasLimit: \"900000000\"\n\t\t\t\t}\n            );\n            rentalContract.transactionConfirmationBlocks = 2;\n            rentalContract.methods.AddPlaylist(PlaylistContract.networks[networkId].address).send({from: accounts[0], gas:200000})\n            // this.setState({});\n\n            \n            const scheduleRes = await fetch(`${mediaScheduleUrl}/`);\n            const schedules = await scheduleRes.json();\n            if(schedules.status===\"Fail\") return message.error(schedules.status_msg);\n            // const schedule_list= schedules.schedule_list;\n            _.forEach(schedules.schedule_list,async(schedule)=>{\n                schedule.contract_status = \"0\";\n                schedule.contract_status = await rentalContract.methods.getRentalStatus(schedule.contract_index).call();\n            })\n\n            console.log('contract_status',schedules.schedule_list[0].contract_status);\n\n            // const playlistRes = await fetch(`${playlistApiUrl}/byDevice/c3fcc585-abb0-4196-97b0-f2000dc7319d`);\n            // const playlist = await playlistRes.json();\n            // if(playlist.status===\"Fail\") return message.error(playlist.status_msg);\n            // _.map(schedules.schedule_list, (data)=>{\n            //     data.medialist=playlist.medialist\n            // })\n\n\n            console.log('schedules',schedules);\n            this.setState({networkId:networkId, rentalContract:rentalContract, accounts:accounts, balance:balance, schedule_list:schedules.schedule_list});\n            // this.setState({ schedule_list:schedules});\n        \n        } catch (error) {\n\t\t\t// Catch any errors for any of the above operations.\n\t\t\talert(`Failed to load web3, accounts, or contract. Check console for details.`);\n\t\t\tconsole.error(error);\n\t\t}\n\t}\n\n    // 1 show create model\n\tonPlayClick = async (schedule) => {\n        if (schedule.contract_status!=0)return false;\n        this.setState({\n            showPlayModal: true,\n            currentSchedule:schedule\n        });\n        console.log('schedule',schedule);\n        const {accounts,networkId,rentalContract} =this.state\n\n        console.log('onAddPlayerClick');\n\n        web3.eth.sendTransaction({from: accounts[5], to: accounts[3], value: '10000000000000000000'})\n        .once('transactionHash', function(hash){ \n            notification.open({ message: <a rel=\"noopener noreferrer\" target=\"_blank\" href={`http://10.0.0.53:8000/#/tx/${hash}`}>PENDING</a>, description: `Detials From:${hash.substring(0,7)}.... to ....${hash.substr(hash.length -7)}`,duration: 0,icon: <Spin  />,});\n        })\n        .once('receipt', async(receipt)=>{            \n            let balance =await web3.eth.getBalance(accounts[4])\n            balance = web3.utils.fromWei(balance, 'ether')\n            this.setState({balance:balance});\n\n            notification.destroy();  \n\n        })\n        .on('confirmation', (confirmationNumber, receipt) => {\n            console.log('confirmation receipt',confirmationNumber,receipt);\n        })\n        /**\n         * 記錄到 log database\n         */\n        const url=`${transactionLogApiUrl}/`\n        const logData={\n            \"from_account_address\": accounts[5],\n            \"from_account_name\": \"contract account\",\n            \"to_account_address\": accounts[3],\n            \"to_account_name\": \"system account\",\n            \"contract_name\": \"Rental\",\n            \"contract_address\": RentalContract.networks[networkId].address,\n            \"contract_parent_address\": RentalContract.networks[networkId].address,\n            \"media_schedule_name\":schedule.media_schedule_name,\n            \"action_name\": \"Succeeded\",\n            \"contract_exec_result\": \"Succeeded\",\n            \"transfer_coins\": 10,\n            \"update_time\": moment().tz(\"Asia/Taipei\").format('YYYY-MM-DD HH:mm:ss'),\n        };\n        \n        await fetch(url,{body:JSON.stringify(logData),method:\"POST\"});\n        rentalContract.methods.updateRental(schedule.contract_index,1).send({from: accounts[2], gas:2000000})\n\n\n    }\n    /**\n     * 2 on succeeded click \n     * sent rent_fee 85\n     * */ \n    onSucceededClick = async () => {\n        console.log('onSucceededClick');\n        this.setState({\n\t\t\tshowPlayModal: false,\n\t\t});\n\t\t// await web3.eth.personal.unlockAccount(\"0xE733e57d488Bc4cb7FA2a51e3EA38f955104DD40\", \"pass1234\",1000)\n        const {accounts, networkId, currentSchedule} =this.state\n        console.log('schedule',currentSchedule);\n        web3.eth.sendTransaction({from: accounts[5], to: accounts[4], value: '85000000000000000000'})\n        .once('transactionHash', function(hash){ \n            notification.open({ message: <a rel=\"noopener noreferrer\" target=\"_blank\" href={`http://10.0.0.53:8000/#/tx/${hash}`}>PENDING</a>, description: `Detials From:${hash.substring(0,7)}.... to ....${hash.substr(hash.length -7)}`,duration: 0,icon: <Spin  />,});\n        })\n        .once('receipt', async(receipt)=>{  \n            let balance =await web3.eth.getBalance(accounts[4])\n            balance = web3.utils.fromWei(balance, 'ether')\n            this.setState({balance:balance});\n            notification.destroy();\n            /**\n             * 記錄到 log database\n             */\n            const url=`${transactionLogApiUrl}/`\n            const logData={\n                \"from_account_address\": accounts[5],\n                \"from_account_name\": \"contract account\",\n                \"to_account_address\": accounts[4],\n                \"to_account_name\": \"player account\",\n                \"contract_name\": \"Rental\",\n                \"contract_address\": RentalContract.networks[networkId].address,\n                \"contract_parent_address\": RentalContract.networks[networkId].address,\n                \"media_schedule_name\":currentSchedule.media_schedule_name,\n                \"action_name\": \"Succeeded\",\n                \"contract_exec_result\": \"Succeeded\",\n                \"transfer_coins\": 85,\n                \"update_time\": moment().tz(\"Asia/Taipei\").format('YYYY-MM-DD HH:mm:ss'),\n            };\n            \n            await fetch(url,{body:JSON.stringify(logData),method:\"POST\"});\n        })\n        .on('confirmation', (confirmationNumber, receipt) => {\n            console.log('confirmation receipt',confirmationNumber,receipt);\n        })\n        web3.eth.sendTransaction({from: accounts[5], to: accounts[3], value: '5000000000000000000'})\n        .once('transactionHash', function(hash){ \n            notification.open({ message: <a rel=\"noopener noreferrer\" target=\"_blank\" href={`http://10.0.0.53:8000/#/tx/${hash}`}>PENDING</a>, description: `Detials From:${hash.substring(0,7)}.... to ....${hash.substr(hash.length -7)}`,duration: 0,icon: <Spin  />,});\n        })\n        .once('receipt', async(receipt)=>{  \n            let balance =await web3.eth.getBalance(accounts[4])\n            balance = web3.utils.fromWei(balance, 'ether')\n            this.setState({balance:balance});\n\n            notification.destroy();\n            /**\n             * 記錄到 log database\n             */\n            const url=`${transactionLogApiUrl}/`\n            const logData={\n                \"from_account_address\": accounts[5],\n                \"from_account_name\": \"contract account\",\n                \"to_account_address\": accounts[3],\n                \"to_account_name\": \"system account\",\n                \"contract_name\": \"Rental\",\n                \"contract_address\": RentalContract.networks[networkId].address,\n                \"contract_parent_address\": RentalContract.networks[networkId].address,\n                \"media_schedule_name\":currentSchedule.media_schedule_name,\n                \"action_name\": \"Succeeded\",\n                \"contract_exec_result\": \"Succeeded\",\n                \"transfer_coins\": 5,\n                \"update_time\": moment().tz(\"Asia/Taipei\").format('YYYY-MM-DD HH:mm:ss'),\n            };\n            \n            await fetch(url,{body:JSON.stringify(logData),method:\"POST\"});\n        })\n        .on('confirmation', (confirmationNumber, receipt) => {\n            console.log('confirmation receipt',confirmationNumber,receipt);\n        })\n\n         \n\n    }\n    onCancelBtnClick = () => {\n\t\tconsole.log('onCancelBtnClick');\n\t\tthis.setState({\n\t\t\tshowPlayModal: false,\n        });\n        \n\t}\n    /**\n     * 3 on Failed click \n     * refund rent_fee 85\n     * */ \n\tonFailedClick = async () => {\n\t\t// await web3.eth.personal.unlockAccount(\"0xE733e57d488Bc4cb7FA2a51e3EA38f955104DD40\", \"pass1234\",1000)\n\n        console.log('onFailedClick');\n\t\t// await web3.eth.personal.unlockAccount(\"0xE733e57d488Bc4cb7FA2a51e3EA38f955104DD40\", \"pass1234\",1000)\n        const {accounts, networkId, currentSchedule} =this.state\n        console.log('schedule',currentSchedule);\n        web3.eth.sendTransaction({from: accounts[5], to: accounts[2], value: '90000000000000000000'})\n        .once('transactionHash', function(hash){ \n            notification.open({ message: <a rel=\"noopener noreferrer\" target=\"_blank\" href={`http://10.0.0.53:8000/#/tx/${hash}`}>PENDING</a>, description: `Detials From:${hash.substring(0,7)}.... to ....${hash.substr(hash.length -7)}`,duration: 0,icon: <Spin  />,});\n        })\n        .once('receipt', async(receipt)=>{  \n            // let balance =await web3.eth.getBalance(accounts[4])\n            // balance = web3.utils.fromWei(balance, 'ether')\n            // this.setState({balance:balance});\n            notification.destroy();\n            /**\n             * 記錄到 log database\n             */\n            const url=`${transactionLogApiUrl}/`\n            const logData={\n                \"from_account_address\": accounts[5],\n                \"from_account_name\": \"contract account\",\n                \"to_account_address\": accounts[2],\n                \"to_account_name\": \"buyer account\",\n                \"contract_name\": \"Rental\",\n                \"contract_address\": RentalContract.networks[networkId].address,\n                \"contract_parent_address\": RentalContract.networks[networkId].address,\n                \"media_schedule_name\":currentSchedule.media_schedule_name,\n                \"action_name\": \"Failed\",\n                \"contract_exec_result\": \"Succeeded\",\n                \"transfer_coins\": 90,\n                \"update_time\": moment().tz(\"Asia/Taipei\").format('YYYY-MM-DD HH:mm:ss'),\n            };\n            await fetch(url,{body:JSON.stringify(logData),method:\"POST\"});\n        })\n         \n        this.setState({\n\t\t\tshowPlayModal: false,\n\t\t});        \n    }\n    \t//Delete \n\tshowDeleteConfirm(value) {\n\t\tModal.confirm({\n\t\t\ttitle:\"Are you sure you want to delete this schedule?\",\n\t\t\tokText: \"OK\",\n\t\t\tcancelText: \"Cancel\",\n\t\t\tonOk: (e) => this.yes(value),\n\t\t});\n\t}\n\tyes(value) {\n\n\treturn new Promise((resolve, reject) => {\n\n\t\t\tsetTimeout(Math.random() > 0.3 ? resolve : reject, 10);\n\t\t\tvar url = `${mediaScheduleUrl}/` + value;\n\t\t\t\tfetch(url, {method: 'DELETE',})\n\t\t\t.then(res=>res.json())\n\t\t\t.then(() => {\n\t\t\t\tfetch(`${mediaScheduleUrl}/`).then(res=>res.json())\n\t\t\t\t.then((results) => {\n\t\t\t\t\tconsole.log(results);\n\t\t\t\t\tthis.setState({schedule_list:results.schedule_list})\t\t\t\n\t\t\t\t})\n\t\t\t})\n\t\t})\n    }\n    \n    render() {\n        // const {contract} =this.state;\n        const columns = [\n            {\n                title: 'Playlist Name',\n                dataIndex: 'media_schedule_name',\n                key: 'media_schedule_name',\n            }, \n            {\n                title: 'Start Time - End Time',\n                dataIndex: 'schedule_settings',\n                key: 'schedule_settings',\n                render:(text, record)=>{\n                    return( `${text.duration_settings.start_date} ~ ${text.duration_settings.end_date}`)\n                }\n            }, \n            {\n                title: 'Rental fee',\n                dataIndex: 'rental_fee',\n                key: 'rental_fee',\n                render:(text, record)=>(\n                    100\n                )\n            }, \n            {\n                title: 'Rental Status',\n                dataIndex: 'contract_status',\n                key: 'contract_status',\n\t\t\t\trender:(text, record)=>(\n                    console.log(record.contract_status,\"record.text\")\n                    // <p>{text}</p>\n\t\t\t\t)\n            }, \n            {\n                title: 'Created Time',\n                dataIndex: 'created_time',\n                key: 'created_time',\n                render:(text, record)=>(\n                    moment(text).format(\"YYYY-MM-DD\")\n                )\n            }, \n        \t{\n\t\t\t\ttitle: 'Action',\n\t\t\t\tdataIndex: 'action',\n\t\t\t\trender:(text, record)=>(\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Tooltip title=\"Play\">\n\t\t\t\t\t\t\t<Button shape=\"circle\" disabled={record.status===1 ? true:false } onClick={() => this.onPlayClick(record)} icon=\"caret-right\"  />\n\t\t\t\t\t\t</Tooltip> \n                        <Tooltip title=\"Delete\">\n                            <Button shape=\"circle\" onClick={() => this.showDeleteConfirm(record.media_schedule_id)} icon=\"delete\"  />\n\t\t\t\t\t\t</Tooltip> \n\t\t\t\t\t</>\n\t\t\t\t)\n            },\n        \t// {\n\t\t\t// \ttitle: 'contract_status',\n            //     dataIndex: 'contract_status',\n            //     key: 'contract_status',\n\n\t\t\t// \trender:(text, record)=>(\n            //         // console.log(text,\"record.text\")\n            //         text\n\t\t\t// \t)\n            // },\n            \n        ];\n    return (\n        <Layout>\n            <Header style={{ position: 'fixed', zIndex: 1, width: '100%', height:'34px', lineHeight:\"32px\" }}></Header>\n            <Content style={{ padding: '0 50px', marginTop: 34 }}>\n                <Breadcrumb style={{ margin: '16px 0' }}>\n                    <Breadcrumb.Item></Breadcrumb.Item>\n                    <Breadcrumb.Item>Device Name</Breadcrumb.Item>\n                </Breadcrumb>\n                <Row>\n\t\t\t\t\t<Col span={16}> \n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={8}>\n\t\t\t\t\t\t<div style={{margin:\"8px\"}}>\n\t\t\t\t\t\t\t<span style={{ padding:\"12px\", color:\"red\"}}>Coin: {this.state.balance} </span>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n                <Row style={{ background: '#fff', padding: 24, minHeight: 380 }}>Content\n                    <Table rowKey={data => data.media_schedule_id} dataSource={this.state.schedule_list} columns={columns} />\n\n                </Row>\n                {/* <Row>\n                    <Button block >Play</Button>\n                </Row>\n                <Row>\n                    <Col>\n                    <Button>Fail</Button>\n                    <Button>Success</Button>\n                    </Col>\n                </Row> */}\n            </Content>\n            <Modal okText=\"OK\" cancelText=\"Cancel\" title=\"Play Result\" width={640} visible={this.state.showPlayModal} onOk={(evt) => this.onSucceededClick()} onCancel={this.onCancelBtnClick}>\n\t\t\t\t<Button onClick={()=>this.onSucceededClick()}> Succeeded</Button>\n\t\t\t\t<Button onClick={()=>this.onFailedClick()}> Failed</Button>\n\n\t\t\t\t\n\t\t\t</Modal>\n            <Footer style={{ textAlign: 'center' }}>\n                Rental System Device ©2019 \n            </Footer>\n        </Layout>\n    );\n  }\n}\n\nexport default App;\n\n\n\n// <Card\n//     hoverable\n//     style={{ width: 240 }}\n//     cover={<img alt=\"example\" src=\"https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png\" />}\n//   >\n//     <Card.Meta\n//       description=\"www.instagram.com\"\n//     />\n//   </Card>\n//   <Card\n//     hoverable\n//     style={{ width: 240 }}\n//     cover={<img alt=\"example\" src=\"https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png\" />}\n//   >\n//     <Card.Meta\n//       description=\"www.instagram.com\"\n//     />\n//   </Card>\n//   <Card\n//     hoverable\n//     style={{ width: 240 }}\n//     cover={<img alt=\"example\" src=\"https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png\" />}\n//   >\n//     <Card.Meta\n//       description=\"www.instagram.com\"\n//     />\n// </Card>"]},"metadata":{},"sourceType":"module"}